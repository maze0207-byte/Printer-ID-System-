# ID Forge - Database Entity Relationship Diagram

## ๐ ูุงุนุฏุฉ ุงูุจูุงูุงุช - ุงูุฑุณู ุงูุชุฎุทูุทู

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                                    ID FORGE DATABASE                                      โ
โ                              Saxony Egypt University (SEU)                               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโ       โโโโโโโโโโโโโโโโโโโโ       โโโโโโโโโโโโโโโโโโโโ
โ    COLLEGES      โ       โ   DEPARTMENTS    โ       โ    PROGRAMS      โ
โ    ุงููููุงุช       โ       โ     ุงูุฃูุณุงู      โ       โ    ุงูุจุฑุงูุฌ       โ
โโโโโโโโโโโโโโโโโโโโค       โโโโโโโโโโโโโโโโโโโโค       โโโโโโโโโโโโโโโโโโโโค
โ PK id            โโโโโ   โ PK id            โโโโโ   โ PK id            โ
โ    name_en       โ   โ   โ FK college_id    โโโโโ   โ FK department_id โโโโโ
โ    name_ar       โ   โ   โ    name_en       โ       โ    name_en       โ
โ    code          โ   โ   โ    name_ar       โ       โ    name_ar       โ
โ    created_at    โ   โ   โ    code          โ       โ    code          โ
โโโโโโโโโโโโโโโโโโโโ   โ   โ    created_at    โ       โ    duration_yearsโ
                       โ   โโโโโโโโโโโโโโโโโโโโ       โ    created_at    โ
                       โ                              โโโโโโโโโโโโโโโโโโโโ
                       โ
                       โ   โโโโโโโโโโโโโโโโโโโโ       โโโโโโโโโโโโโโโโโโโโ
                       โ   โ     LEVELS       โ       โ  CARD_TEMPLATES  โ
                       โ   โ   ุงููุณุชููุงุช      โ       โ   ููุงูุจ ุงูุจุทุงูุงุช โ
                       โ   โโโโโโโโโโโโโโโโโโโโค       โโโโโโโโโโโโโโโโโโโโค
                       โ   โ PK id            โ       โ PK id            โ
                       โ   โ    name_en       โ       โ    name          โ
                       โ   โ    name_ar       โ       โ    width_mm      โ
                       โ   โ    order         โ       โ    height_mm     โ
                       โ   โ    created_at    โ       โ    is_default    โ
                       โ   โโโโโโโโโโโโโโโโโโโโ       โ    created_at    โ
                       โ                              โโโโโโโโโโโโโโโโโโโโ
                       โ
                       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                              PERSONS (ุงูุฃุดุฎุงุต)                            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ PK id                  โ FK college_id      โ FK program_id             โ
โ    university_id (UQ)  โ FK department_id   โ FK level_id               โ
โ    type                โ                    โ                           โ
โ    full_name_en        โ    email           โ    status                 โ
โ    full_name_ar        โ    phone           โ    created_at             โ
โ    national_id         โ    photo_url       โ    updated_at             โ
โ    position            โ                    โ                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                       โ
                       โ 1:N
                       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                              CARDS (ุงูุจุทุงูุงุช)                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ PK id                  โ    issue_date      โ    program                โ
โ FK person_id           โ    expiry_date     โ    year                   โ
โ    card_number         โ    status          โ    photo_url              โ
โ    name                โ    print_count     โ    email                  โ
โ    id_number           โ    last_printed_at โ    created_at             โ
โ    type                โ    department      โ                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโ       โโโโโโโโโโโโโโโโโโโโ       โโโโโโโโโโโโโโโโโโโโ
โ     USERS        โ       โ   AUDIT_LOGS     โ       โ  ID_SEQUENCES    โ
โ   ุงููุณุชุฎุฏููู     โ       โ  ุณุฌู ุงูุชุฏููู    โ       โ  ุชุณูุณู ุงูุฃุฑูุงู   โ
โโโโโโโโโโโโโโโโโโโโค       โโโโโโโโโโโโโโโโโโโโค       โโโโโโโโโโโโโโโโโโโโค
โ PK id            โโโโโ   โ PK id            โ       โ PK id            โ
โ    username (UQ) โ   โ   โ FK user_id       โโโโโ   โ    prefix        โ
โ    password_hash โ   โ   โ    action        โ       โ    year          โ
โ    full_name     โ   โ   โ    entity_type   โ       โ    next_number   โ
โ    role          โ   โ   โ    entity_id     โ       โ    (UQ prefix+yr)โ
โ    is_active     โ   โ   โ    old_values    โ       โโโโโโโโโโโโโโโโโโโโ
โ    created_at    โ   โ   โ    new_values    โ
โ    last_login    โ   โ   โ    ip_address    โ       โโโโโโโโโโโโโโโโโโโโ
โโโโโโโโโโโโโโโโโโโโ   โ   โ    created_at    โ       โ    SETTINGS      โ
                       โ   โโโโโโโโโโโโโโโโโโโโ       โ    ุงูุฅุนุฏุงุฏุงุช     โ
                       โ                              โโโโโโโโโโโโโโโโโโโโค
                       โ                              โ PK key           โ
                       โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    value         โ
                                                      โ    updated_at    โ
                                                      โโโโโโโโโโโโโโโโโโโโ
```

## ๐ ุฌุฏูู ุงูุชูุงุตูู

### 1. COLLEGES (ุงููููุงุช)
| ุงูุนููุฏ | ุงูููุน | ุงููุตู |
|--------|-------|-------|
| id | INTEGER PK | ุงููุนุฑู ุงููุฑูุฏ |
| name_en | TEXT | ุงูุงุณู ุจุงูุฅูุฌููุฒูุฉ |
| name_ar | TEXT | ุงูุงุณู ุจุงูุนุฑุจูุฉ |
| code | TEXT UQ | ุงูุฑูุฒ (ูุซู ENG, CS) |
| created_at | DATETIME | ุชุงุฑูุฎ ุงูุฅูุดุงุก |

### 2. DEPARTMENTS (ุงูุฃูุณุงู)
| ุงูุนููุฏ | ุงูููุน | ุงููุตู |
|--------|-------|-------|
| id | INTEGER PK | ุงููุนุฑู ุงููุฑูุฏ |
| college_id | INTEGER FK | ูุนุฑู ุงููููุฉ |
| name_en | TEXT | ุงูุงุณู ุจุงูุฅูุฌููุฒูุฉ |
| name_ar | TEXT | ุงูุงุณู ุจุงูุนุฑุจูุฉ |
| code | TEXT | ุงูุฑูุฒ |
| created_at | DATETIME | ุชุงุฑูุฎ ุงูุฅูุดุงุก |

### 3. PROGRAMS (ุงูุจุฑุงูุฌ)
| ุงูุนููุฏ | ุงูููุน | ุงููุตู |
|--------|-------|-------|
| id | INTEGER PK | ุงููุนุฑู ุงููุฑูุฏ |
| department_id | INTEGER FK | ูุนุฑู ุงููุณู |
| name_en | TEXT | ุงูุงุณู ุจุงูุฅูุฌููุฒูุฉ |
| name_ar | TEXT | ุงูุงุณู ุจุงูุนุฑุจูุฉ |
| code | TEXT | ุงูุฑูุฒ |
| duration_years | INTEGER | ูุฏุฉ ุงูุจุฑูุงูุฌ ุจุงูุณููุงุช |
| created_at | DATETIME | ุชุงุฑูุฎ ุงูุฅูุดุงุก |

### 4. LEVELS (ุงููุณุชููุงุช ุงูุฏุฑุงุณูุฉ)
| ุงูุนููุฏ | ุงูููุน | ุงููุตู |
|--------|-------|-------|
| id | INTEGER PK | ุงููุนุฑู ุงููุฑูุฏ |
| name_en | TEXT | ุงูุงุณู ุจุงูุฅูุฌููุฒูุฉ |
| name_ar | TEXT | ุงูุงุณู ุจุงูุนุฑุจูุฉ |
| order | INTEGER | ุงูุชุฑุชูุจ |
| created_at | DATETIME | ุชุงุฑูุฎ ุงูุฅูุดุงุก |

### 5. PERSONS (ุงูุฃุดุฎุงุต)
| ุงูุนููุฏ | ุงูููุน | ุงููุตู |
|--------|-------|-------|
| id | INTEGER PK | ุงููุนุฑู ุงููุฑูุฏ |
| university_id | TEXT UQ | ุงูุฑูู ุงูุฌุงูุนู |
| type | TEXT | ุงูููุน (student/staff/visitor) |
| full_name_en | TEXT | ุงูุงุณู ุจุงูุฅูุฌููุฒูุฉ |
| full_name_ar | TEXT | ุงูุงุณู ุจุงูุนุฑุจูุฉ |
| email | TEXT | ุงูุจุฑูุฏ ุงูุฅููุชุฑููู |
| phone | TEXT | ุฑูู ุงููุงุชู |
| national_id | TEXT | ุงูุฑูู ุงููููู |
| photo_url | TEXT | ุฑุงุจุท ุงูุตูุฑุฉ |
| college_id | INTEGER FK | ูุนุฑู ุงููููุฉ |
| department_id | INTEGER FK | ูุนุฑู ุงููุณู |
| program_id | INTEGER FK | ูุนุฑู ุงูุจุฑูุงูุฌ |
| level_id | INTEGER FK | ูุนุฑู ุงููุณุชูู |
| position | TEXT | ุงูููุตุจ (ููููุธููู) |
| status | TEXT | ุงูุญุงูุฉ (active/suspended/expired) |
| created_at | DATETIME | ุชุงุฑูุฎ ุงูุฅูุดุงุก |
| updated_at | DATETIME | ุชุงุฑูุฎ ุงูุชุญุฏูุซ |

### 6. CARDS (ุงูุจุทุงูุงุช)
| ุงูุนููุฏ | ุงูููุน | ุงููุตู |
|--------|-------|-------|
| id | INTEGER PK | ุงููุนุฑู ุงููุฑูุฏ |
| person_id | INTEGER FK | ูุนุฑู ุงูุดุฎุต |
| card_number | TEXT | ุฑูู ุงูุจุทุงูุฉ |
| issue_date | DATE | ุชุงุฑูุฎ ุงูุฅุตุฏุงุฑ |
| expiry_date | DATE | ุชุงุฑูุฎ ุงูุงูุชูุงุก |
| status | TEXT | ุงูุญุงูุฉ |
| print_count | INTEGER | ุนุฏุฏ ูุฑุงุช ุงูุทุจุงุนุฉ |
| last_printed_at | DATETIME | ุขุฎุฑ ุทุจุงุนุฉ |
| name | TEXT | ุงูุงุณู ุนูู ุงูุจุทุงูุฉ |
| id_number | TEXT | ุงูุฑูู ุนูู ุงูุจุทุงูุฉ |
| type | TEXT | ุงูููุน |
| department | TEXT | ุงููุณู |
| program | TEXT | ุงูุจุฑูุงูุฌ |
| year | TEXT | ุงูุณูุฉ |
| photo_url | TEXT | ุฑุงุจุท ุงูุตูุฑุฉ |
| email | TEXT | ุงูุจุฑูุฏ ุงูุฅููุชุฑููู |
| created_at | DATETIME | ุชุงุฑูุฎ ุงูุฅูุดุงุก |

### 7. CARD_TEMPLATES (ููุงูุจ ุงูุจุทุงูุงุช)
| ุงูุนููุฏ | ุงูููุน | ุงููุตู |
|--------|-------|-------|
| id | INTEGER PK | ุงููุนุฑู ุงููุฑูุฏ |
| name | TEXT | ุงุณู ุงููุงูุจ |
| width_mm | REAL | ุงูุนุฑุถ ุจุงููููููุชุฑ |
| height_mm | REAL | ุงูุงุฑุชูุงุน ุจุงููููููุชุฑ |
| is_default | INTEGER | ุงููุงูุจ ุงูุงูุชุฑุงุถู |
| created_at | DATETIME | ุชุงุฑูุฎ ุงูุฅูุดุงุก |

### 8. USERS (ุงููุณุชุฎุฏููู)
| ุงูุนููุฏ | ุงูููุน | ุงููุตู |
|--------|-------|-------|
| id | INTEGER PK | ุงููุนุฑู ุงููุฑูุฏ |
| username | TEXT UQ | ุงุณู ุงููุณุชุฎุฏู |
| password_hash | TEXT | ูููุฉ ุงููุฑูุฑ ุงููุดูุฑุฉ |
| full_name | TEXT | ุงูุงุณู ุงููุงูู |
| role | TEXT | ุงูุฏูุฑ (admin/operator/viewer) |
| is_active | INTEGER | ุงูุญุงูุฉ |
| created_at | DATETIME | ุชุงุฑูุฎ ุงูุฅูุดุงุก |
| last_login | DATETIME | ุขุฎุฑ ุชุณุฌูู ุฏุฎูู |

### 9. AUDIT_LOGS (ุณุฌู ุงูุชุฏููู)
| ุงูุนููุฏ | ุงูููุน | ุงููุตู |
|--------|-------|-------|
| id | INTEGER PK | ุงููุนุฑู ุงููุฑูุฏ |
| user_id | INTEGER FK | ูุนุฑู ุงููุณุชุฎุฏู |
| action | TEXT | ุงูุนูููุฉ |
| entity_type | TEXT | ููุน ุงูููุงู |
| entity_id | INTEGER | ูุนุฑู ุงูููุงู |
| old_values | TEXT JSON | ุงูููู ุงููุฏููุฉ |
| new_values | TEXT JSON | ุงูููู ุงูุฌุฏูุฏุฉ |
| ip_address | TEXT | ุนููุงู IP |
| created_at | DATETIME | ุชุงุฑูุฎ ุงูุฅูุดุงุก |

### 10. ID_SEQUENCES (ุชุณูุณู ุงูุฃุฑูุงู)
| ุงูุนููุฏ | ุงูููุน | ุงููุตู |
|--------|-------|-------|
| id | INTEGER PK | ุงููุนุฑู ุงููุฑูุฏ |
| prefix | TEXT | ุงูุจุงุฏุฆุฉ (STU/EMP/VIS) |
| year | INTEGER | ุงูุณูุฉ |
| next_number | INTEGER | ุงูุฑูู ุงูุชุงูู |

### 11. SETTINGS (ุงูุฅุนุฏุงุฏุงุช)
| ุงูุนููุฏ | ุงูููุน | ุงููุตู |
|--------|-------|-------|
| key | TEXT PK | ููุชุงุญ ุงูุฅุนุฏุงุฏ |
| value | TEXT | ุงููููุฉ |
| updated_at | DATETIME | ุชุงุฑูุฎ ุงูุชุญุฏูุซ |

## ๐ ุงูุนูุงูุงุช

1. **College โ Departments**: ูููุฉ ูุงุญุฏุฉ ููุง ุฃูุณุงู ูุชุนุฏุฏุฉ (1:N)
2. **Department โ Programs**: ูุณู ูุงุญุฏ ูู ุจุฑุงูุฌ ูุชุนุฏุฏุฉ (1:N)
3. **Person โ College/Department/Program/Level**: ุดุฎุต ููุชูู ููููุฉ ููุณู ูุจุฑูุงูุฌ ููุณุชูู (N:1)
4. **Person โ Cards**: ุดุฎุต ูู ุจุทุงูุงุช ูุชุนุฏุฏุฉ (1:N)
5. **User โ Audit_Logs**: ูุณุชุฎุฏู ูู ุณุฌูุงุช ุชุฏููู ูุชุนุฏุฏุฉ (1:N)

## ๐ ุฃุญุฌุงู ุงูุจุทุงูุงุช ุงููุชุงุญุฉ

| ุงููุงูุจ | ุงูุนุฑุถ (ูู) | ุงูุงุฑุชูุงุน (ูู) | ุงูุงุณุชุฎุฏุงู |
|--------|-----------|--------------|-----------|
| CR80 Standard | 85.6 | 53.98 | ุจุทุงูุงุช ุงููููุฉ ุงูููุงุณูุฉ |
| CR79 | 83.9 | 51.0 | ุจุทุงูุงุช ุฃุตุบุฑ |
| CR100 | 97.0 | 67.0 | ุจุทุงูุงุช ูุจูุฑุฉ |
| Custom | ูุฎุตุต | ูุฎุตุต | ุญุณุจ ุงูุทูุจ |
